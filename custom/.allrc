# .allrc
# Run by .zshrc as first custom config file definition.

# Clean variables
export ZSH_LOAD_ERROR=false
export ZSH_LOAD_WARN=false

# Functions

# zsh_load_msg <type: 0,1,2> <message>
# :variablize initial load messages
function zsh_load_msg() {
  # printf "1 is %s\n" $1
  # printf "2 is %s\n" $2
  case $1 in

    0)
      export ZSH_LOAD_TYPE="NOTICE"
      ;;
    
    1)
      export ZSH_LOAD_TYPE="WARNING"
      ;;

    2)
      export ZSH_LOAD_TYPE="ERROR"
      ;;

    *)
      export ZSH_LOAD_TYPE="??? invalid type ???"
      ;;
  esac

  #if [[! -v ZSH_QUIET_STARTUP ]]; then # TODO -- errors really be supressed even if quiet?
    # exit on error
    if [[ $ZSH_LOAD_TYPE == "ERROR" ]] then
      printf "\a[%s] zsh startup: %s\n" $ZSH_LOAD_TYPE $2 # \a triggers an alarm on errors
      export ZSH_LOAD_ERROR=true
      return -1
    elif [[ $ZSH_LOAD_TYPE == "WARNING" ]] then # did we get warned?
      export ZSG_LOAD_WARN=true
      printf "[%s] zsh startup: %s\n" $ZSH_LOAD_TYPE $2
    else # By default we only want to display warns and errors.
      if [[ $ZSH_LOAD_TYPE == "NOTICE" && ! $ZSH_FORCE_NOTICES ]] then
        return 0
      else
        printf "[%s] zsh startup: %s\n" $ZSH_LOAD_TYPE $2
      fi
    fi
  #fi
}

zsh_load_msg 0 "Loading configuration..."

# lag
# :combine file listing and search (not to be confused with a lag switch)
function lag() {
  la | grep $1
}


# Commands used universally

# zshrc
# :reload zsh
alias zshrc="source ~/.zshrc"

# rcgo
# :quickly go to the custom zsh configuration folder
alias rcgo="cd ~/configs/custom"

# Navigation

# la
alias la="ls -lah"

# lat
alias lat="ls -lath" # la + t (sort by newest first)

# Files

# Replace cp with rsync so we can see what's going on.
# See https://askubuntu.com/questions/17275/how-to-show-the-transfer-progress-and-speed-when-copying-files-with-cp
alias cp="rsync -ah --progress"

# Useful tools
alias wip="ifconfig | sed -En 's/127.0.0.1//;s/.*inet (addr:)?(([0-9]*\.){3}[0-9]*).*/\2/p'"
alias speedtest="curl -s https://raw.githubusercontent.com/sivel/speedtest-cli/master/speedtest.py | python -"

# Startup settings

# TMUX_ON_STARTUP
# Boolean; default true
export TMUX_ON_STARTUP=true

# EXA_ON_STARTUP
# Boolean; default true
export EXA_ON_STARTUP=true